# Python 문법 치트 시트

> **🎯 목적**: 5일간 배운 파이썬 문법을 빠르게 참고하기 위한 레퍼런스

---

## ⚡ 1. 기본 문법

### 변수와 자료형

**변수 선언 (타입 명시 불필요)**:
```python
# 문자열
name = "철수"
city = '서울'

# 숫자
age = 25
temperature = 15.5

# 불린 (참/거짓)
is_student = True
is_raining = False
```

**타입 확인**:
```python
print(type(name))        # <class 'str'>
print(type(age))         # <class 'int'>
print(type(temperature)) # <class 'float'>
```

**💡 실습에서 활용**:
```python
# 01일차 - 이미지 검색 앱
keyword = st.text_input("검색어")  # 문자열 변수
max_results = 10                   # 숫자 변수
```

---

### 연산자

**산술 연산**:
```python
a = 10
b = 3

print(a + b)   # 13 (더하기)
print(a - b)   # 7  (빼기)
print(a * b)   # 30 (곱하기)
print(a / b)   # 3.333... (나누기)
print(a // b)  # 3  (몫)
print(a % b)   # 1  (나머지)
print(a ** b)  # 1000 (거듭제곱)
```

**비교 연산**:
```python
print(10 > 5)   # True
print(10 < 5)   # False
print(10 == 10) # True (같다)
print(10 != 5)  # True (다르다)
print(10 >= 10) # True
```

**논리 연산**:
```python
print(True and False)  # False (둘 다 참이어야 참)
print(True or False)   # True  (하나만 참이면 참)
print(not True)        # False (참/거짓 반전)
```

**문자열 연결**:
```python
first_name = "이"
last_name = "철수"
full_name = first_name + last_name  # "이철수"

# 반복
print("안녕" * 3)  # "안녕안녕안녕"
```

---

### 조건문

**if 문 기본**:
```python
age = 20

if age >= 18:
    print("성인입니다")
```

**if-else**:
```python
temperature = 15

if temperature > 20:
    print("따뜻합니다")
else:
    print("춥습니다")
```

**if-elif-else**:
```python
score = 85

if score >= 90:
    print("A")
elif score >= 80:
    print("B")
elif score >= 70:
    print("C")
else:
    print("F")
```

**💡 실습에서 활용**:
```python
# 01일차 - 이미지 검색 앱
if keyword:
    # 검색어가 있으면 검색
    results = ddgs.images(keyword)
else:
    # 없으면 경고
    st.warning("검색어를 입력하세요!")
```

---

### 반복문

**for 반복문 (리스트)**:
```python
fruits = ["사과", "바나나", "포도"]

for fruit in fruits:
    print(fruit)
# 사과
# 바나나
# 포도
```

**for 반복문 (range)**:
```python
# 0부터 4까지
for i in range(5):
    print(i)  # 0, 1, 2, 3, 4

# 1부터 5까지
for i in range(1, 6):
    print(i)  # 1, 2, 3, 4, 5

# 2씩 증가
for i in range(0, 10, 2):
    print(i)  # 0, 2, 4, 6, 8
```

**enumerate() - 인덱스와 값 동시에**:
```python
fruits = ["사과", "바나나", "포도"]

for idx, fruit in enumerate(fruits):
    print(f"{idx}: {fruit}")
# 0: 사과
# 1: 바나나
# 2: 포도

# 1부터 시작
for idx, fruit in enumerate(fruits, 1):
    print(f"{idx}: {fruit}")
# 1: 사과
# 2: 바나나
# 3: 포도
```

**while 반복문**:
```python
count = 0

while count < 5:
    print(count)
    count += 1
# 0, 1, 2, 3, 4
```

**break와 continue**:
```python
# break - 반복문 종료
for i in range(10):
    if i == 5:
        break
    print(i)  # 0, 1, 2, 3, 4

# continue - 다음 반복으로 건너뛰기
for i in range(5):
    if i == 2:
        continue
    print(i)  # 0, 1, 3, 4
```

**💡 실습에서 활용**:
```python
# 01일차 - 이미지 검색 앱
cols = st.columns(3)
for idx, img in enumerate(results):
    with cols[idx % 3]:
        st.image(img['image'])
```

---

### 주석

```python
# 한 줄 주석

"""
여러 줄 주석
(또는 문서화 문자열)
"""

'''
작은따옴표로도 가능
'''

x = 10  # 코드 옆에도 가능
```

---

## 📦 2. 자료구조

### 리스트 (List)

**리스트 생성**:
```python
# 빈 리스트
empty_list = []

# 값이 있는 리스트
fruits = ["사과", "바나나", "포도"]
numbers = [1, 2, 3, 4, 5]
mixed = [1, "hello", True, 3.14]
```

**인덱싱 (접근)**:
```python
fruits = ["사과", "바나나", "포도"]

print(fruits[0])   # "사과" (첫 번째)
print(fruits[1])   # "바나나"
print(fruits[-1])  # "포도" (마지막)
print(fruits[-2])  # "바나나" (뒤에서 두 번째)
```

**슬라이싱 (범위 접근)**:
```python
numbers = [0, 1, 2, 3, 4, 5]

print(numbers[1:4])   # [1, 2, 3] (인덱스 1~3)
print(numbers[:3])    # [0, 1, 2] (처음부터 3개)
print(numbers[3:])    # [3, 4, 5] (3번째부터 끝까지)
print(numbers[::2])   # [0, 2, 4] (2칸씩)
print(numbers[::-1])  # [5, 4, 3, 2, 1, 0] (역순)
```

**리스트 수정**:
```python
fruits = ["사과", "바나나"]

# 추가
fruits.append("포도")           # ["사과", "바나나", "포도"]
fruits.insert(1, "딸기")        # ["사과", "딸기", "바나나", "포도"]
fruits.extend(["수박", "멜론"]) # ["사과", "딸기", "바나나", "포도", "수박", "멜론"]

# 삭제
fruits.remove("딸기")  # 첫 번째 "딸기" 삭제
last = fruits.pop()    # 마지막 항목 제거하고 반환 ("멜론")
del fruits[0]          # 인덱스로 삭제

# 정렬
numbers = [3, 1, 4, 1, 5]
numbers.sort()              # [1, 1, 3, 4, 5] (원본 수정)
sorted_nums = sorted(numbers)  # 원본 유지, 새 리스트 반환
```

**리스트 메서드**:
```python
fruits = ["사과", "바나나", "포도", "사과"]

print(len(fruits))         # 4 (길이)
print(fruits.count("사과")) # 2 (개수)
print(fruits.index("바나나")) # 1 (위치)

fruits.clear()             # 모든 항목 삭제
```

**리스트 컴프리헨션**:
```python
# 기본
numbers = [1, 2, 3, 4, 5]
squared = [n ** 2 for n in numbers]
# [1, 4, 9, 16, 25]

# 조건 포함
even_numbers = [n for n in numbers if n % 2 == 0]
# [2, 4]
```

**💡 실습에서 활용**:
```python
# 02일차 - 뉴스 크롤러
news_list = []
for headline in headlines[:10]:
    news_list.append({
        "제목": headline.text,
        "링크": headline['href']
    })
```

---

### 딕셔너리 (Dictionary)

**딕셔너리 생성**:
```python
# 빈 딕셔너리
empty_dict = {}

# 값이 있는 딕셔너리
person = {
    "name": "철수",
    "age": 25,
    "city": "서울"
}

# dict() 함수로 생성
person2 = dict(name="영희", age=23, city="부산")
```

**값 접근**:
```python
person = {"name": "철수", "age": 25, "city": "서울"}

# 키로 접근 (키가 없으면 에러)
print(person["name"])  # "철수"

# .get() 메서드 (키가 없으면 None 또는 기본값)
print(person.get("name"))        # "철수"
print(person.get("phone"))       # None
print(person.get("phone", "없음")) # "없음"
```

**딕셔너리 수정**:
```python
person = {"name": "철수", "age": 25}

# 추가/수정
person["city"] = "서울"     # 새 키 추가
person["age"] = 26          # 기존 값 수정

# 삭제
del person["city"]          # 키 삭제
age = person.pop("age")     # 키 삭제하고 값 반환
```

**딕셔너리 메서드**:
```python
person = {"name": "철수", "age": 25, "city": "서울"}

# 키, 값, 항목 가져오기
keys = person.keys()        # dict_keys(['name', 'age', 'city'])
values = person.values()    # dict_values(['철수', 25, '서울'])
items = person.items()      # dict_items([('name', '철수'), ...])

# 순회
for key in person:
    print(key, person[key])

for key, value in person.items():
    print(f"{key}: {value}")
```

**💡 실습에서 활용**:
```python
# 03일차 - 날씨 앱
data = response.json()  # API 응답을 딕셔너리로 변환
temperature = data['main']['temp']       # 중첩 딕셔너리 접근
description = data['weather'][0]['description']
```

---

### 문자열 (String)

**문자열 생성**:
```python
text1 = "안녕하세요"
text2 = '파이썬'
text3 = """여러 줄
문자열"""
```

**문자열 포맷팅**:
```python
name = "철수"
age = 25

# f-string (권장)
message = f"제 이름은 {name}이고, {age}살입니다."

# format()
message = "제 이름은 {}이고, {}살입니다.".format(name, age)

# % 연산자 (구버전)
message = "제 이름은 %s이고, %d살입니다." % (name, age)
```

**문자열 메서드**:
```python
text = "Hello World"

# 대소문자 변환
print(text.lower())      # "hello world"
print(text.upper())      # "HELLO WORLD"
print(text.capitalize()) # "Hello world"

# 검색
print(text.find("World"))    # 6 (위치, 없으면 -1)
print(text.index("World"))   # 6 (위치, 없으면 에러)
print("World" in text)       # True (포함 여부)

# 치환
print(text.replace("World", "Python"))  # "Hello Python"

# 분리/결합
words = text.split()         # ["Hello", "World"]
joined = "-".join(words)     # "Hello-World"

# 공백 제거
text2 = "  hello  "
print(text2.strip())   # "hello" (양쪽)
print(text2.lstrip())  # "hello  " (왼쪽)
print(text2.rstrip())  # "  hello" (오른쪽)
```

**문자열 확인**:
```python
print("123".isdigit())      # True (숫자인지)
print("abc".isalpha())      # True (알파벳인지)
print("abc123".isalnum())   # True (알파벳+숫자)
print("  ".isspace())       # True (공백인지)
```

**💡 실습에서 활용**:
```python
# 02일차 - 뉴스 크롤러
title = headline.text.strip()  # 공백 제거
short_title = title[:50]       # 앞 50자만
```

---

### 튜플 (Tuple)

**튜플 생성** (수정 불가능한 리스트):
```python
# 소괄호 또는 쉼표로 생성
coordinates = (10, 20)
rgb = 255, 128, 0

# 하나의 요소만 있을 때
single = (42,)  # 쉼표 필수!
```

**튜플 사용**:
```python
point = (10, 20, 30)

# 인덱싱/슬라이싱 (리스트와 동일)
print(point[0])   # 10
print(point[1:])  # (20, 30)

# 언패킹
x, y, z = point
print(x, y, z)    # 10 20 30
```

**💡 언제 사용하나요?**:
- 변경되지 않는 값들을 그룹화
- 딕셔너리 키로 사용 가능 (리스트는 불가)
- 함수에서 여러 값 반환할 때

---

## 🔧 3. 함수

### 함수 정의

**기본 함수**:
```python
def greet():
    print("안녕하세요!")

greet()  # "안녕하세요!"
```

**매개변수가 있는 함수**:
```python
def greet(name):
    print(f"안녕하세요, {name}님!")

greet("철수")  # "안녕하세요, 철수님!"
```

**반환값이 있는 함수**:
```python
def add(a, b):
    return a + b

result = add(3, 5)
print(result)  # 8
```

**기본값 매개변수**:
```python
def greet(name, greeting="안녕하세요"):
    return f"{greeting}, {name}님!"

print(greet("철수"))           # "안녕하세요, 철수님!"
print(greet("철수", "반갑습니다"))  # "반갑습니다, 철수님!"
```

**여러 값 반환**:
```python
def get_person():
    name = "철수"
    age = 25
    return name, age  # 튜플로 반환

n, a = get_person()
print(n, a)  # "철수 25"
```

---

### 주요 내장 함수

**출력 함수**:
```python
print("Hello")              # 기본 출력
print("A", "B", "C")        # 여러 값 출력 (공백으로 구분)
print("A", "B", sep="-")    # "A-B" (구분자 지정)
print("안녕", end="!")      # "안녕!" (끝 문자 지정)
```

**타입 변환**:
```python
# 문자열 → 숫자
age = int("25")        # 25
price = float("19.99") # 19.99

# 숫자 → 문자열
text = str(123)        # "123"

# 리스트 → 문자열
numbers = [1, 2, 3]
text = str(numbers)    # "[1, 2, 3]"
```

**길이와 합계**:
```python
numbers = [1, 2, 3, 4, 5]

print(len(numbers))    # 5 (길이)
print(sum(numbers))    # 15 (합계)
print(max(numbers))    # 5 (최댓값)
print(min(numbers))    # 1 (최솟값)
```

**범위 생성**:
```python
# range(끝)
list(range(5))        # [0, 1, 2, 3, 4]

# range(시작, 끝)
list(range(2, 7))     # [2, 3, 4, 5, 6]

# range(시작, 끝, 간격)
list(range(0, 10, 2)) # [0, 2, 4, 6, 8]
```

**반복과 인덱스**:
```python
fruits = ["사과", "바나나", "포도"]

# enumerate - 인덱스와 값
for idx, fruit in enumerate(fruits):
    print(idx, fruit)

# zip - 여러 리스트 동시 순회
names = ["철수", "영희"]
ages = [25, 23]
for name, age in zip(names, ages):
    print(name, age)
```

---

## 📚 4. 모듈과 패키지

### import 기본

**전체 모듈 import**:
```python
import math

print(math.pi)      # 3.141592...
print(math.sqrt(16)) # 4.0
```

**별칭 사용**:
```python
import streamlit as st

st.title("제목")
```

**특정 함수만 import**:
```python
from math import pi, sqrt

print(pi)      # 3.141592...
print(sqrt(16)) # 4.0
```

**모든 것 import (권장 안 함)**:
```python
from math import *  # 네임스페이스 오염 가능
```

---

### 교육에서 사용한 주요 라이브러리

**Streamlit** (웹 앱):
```python
import streamlit as st
```

**requests** (HTTP 요청):
```python
import requests
```

**BeautifulSoup** (크롤링):
```python
from bs4 import BeautifulSoup
```

**OpenAI API**:
```python
from openai import OpenAI
```

**QR 코드**:
```python
import qrcode
```

**데이터 처리**:
```python
import pandas as pd
```

**날짜/시간**:
```python
from datetime import datetime
```

**메모리 파일**:
```python
from io import BytesIO
```

---

## 📄 5. 파일 처리

### 파일 열기/닫기

**기본 방식** (닫기 필수):
```python
# 파일 열기
file = open("data.txt", "r")

# 파일 읽기
content = file.read()
print(content)

# 파일 닫기 (필수!)
file.close()
```

**with 문 (권장)** - 자동으로 닫힘:
```python
with open("data.txt", "r") as file:
    content = file.read()
    print(content)
# 여기서 자동으로 닫힘
```

---

### 파일 모드

| 모드 | 설명 | 비고 |
|------|------|------|
| `r` | 읽기 (기본값) | 파일이 없으면 에러 |
| `w` | 쓰기 | 파일이 있으면 덮어씀 |
| `a` | 추가 | 파일 끝에 추가 |
| `x` | 새로 만들기 | 파일이 있으면 에러 |
| `b` | 바이너리 모드 | 이미지, PDF 등 |
| `t` | 텍스트 모드 (기본값) | 텍스트 파일 |

**조합**:
- `rb`: 바이너리 읽기
- `wb`: 바이너리 쓰기
- `r+`: 읽기+쓰기

---

### 파일 읽기

**전체 읽기**:
```python
with open("data.txt", "r", encoding="utf-8") as file:
    content = file.read()  # 전체 내용 (문자열)
    print(content)
```

**줄 단위 읽기**:
```python
# 한 줄씩 리스트로
with open("data.txt", "r", encoding="utf-8") as file:
    lines = file.readlines()  # ['첫째 줄\n', '둘째 줄\n', ...]

# 한 줄씩 반복
with open("data.txt", "r", encoding="utf-8") as file:
    for line in file:
        print(line.strip())  # 줄바꿈 제거
```

---

### 파일 쓰기

**새 파일 만들기 (덮어쓰기)**:
```python
with open("output.txt", "w", encoding="utf-8") as file:
    file.write("안녕하세요\n")
    file.write("파이썬입니다")
```

**기존 파일에 추가**:
```python
with open("output.txt", "a", encoding="utf-8") as file:
    file.write("\n새로운 줄")
```

**여러 줄 쓰기**:
```python
lines = ["첫째 줄\n", "둘째 줄\n", "셋째 줄\n"]

with open("output.txt", "w", encoding="utf-8") as file:
    file.writelines(lines)
```

---

### BytesIO (메모리 버퍼)

**메모리에서 파일처럼 다루기**:
```python
from io import BytesIO

# 이미지를 메모리에 저장
buffer = BytesIO()
img.save(buffer, format="PNG")

# 바이트 데이터 가져오기
data = buffer.getvalue()

# Streamlit 다운로드 버튼에 전달
st.download_button(
    label="다운로드",
    data=data,
    file_name="image.png",
    mime="image/png"
)
```

**💡 실습에서 활용**:
```python
# 02일차 - QR 코드 생성기
buffer = BytesIO()
qr_image.save(buffer, format="PNG")
st.download_button(
    label="이미지 다운로드",
    data=buffer.getvalue(),
    file_name="qrcode.png"
)
```

---

## ⚠️ 6. 예외 처리

### try-except 기본

**기본 형태**:
```python
try:
    # 시도할 코드
    number = int(input("숫자 입력: "))
    print(10 / number)
except:
    # 에러 발생 시 실행
    print("에러가 발생했습니다!")
```

**특정 예외 처리**:
```python
try:
    number = int(input("숫자 입력: "))
    result = 10 / number
except ValueError:
    print("숫자를 입력하세요!")
except ZeroDivisionError:
    print("0으로 나눌 수 없습니다!")
```

**예외 메시지 출력**:
```python
try:
    number = int(input("숫자 입력: "))
except ValueError as e:
    print(f"에러 메시지: {e}")
```

---

### try-except-else-finally

```python
try:
    # 시도할 코드
    file = open("data.txt", "r")
    content = file.read()
except FileNotFoundError:
    # 에러 발생 시
    print("파일이 없습니다!")
else:
    # 에러가 없을 때만 실행
    print("파일 읽기 성공!")
    print(content)
finally:
    # 항상 실행 (정리 작업)
    file.close()
    print("파일 닫기 완료")
```

---

### 주요 예외 타입

| 예외 | 발생 상황 |
|------|-----------|
| `ValueError` | 잘못된 값 (예: `int("abc")`) |
| `TypeError` | 잘못된 타입 (예: `"hello" + 5`) |
| `KeyError` | 딕셔너리에 없는 키 접근 |
| `IndexError` | 리스트 범위 초과 |
| `FileNotFoundError` | 파일이 없음 |
| `ZeroDivisionError` | 0으로 나누기 |
| `AttributeError` | 없는 속성/메서드 접근 |
| `ImportError` | 모듈 import 실패 |

---

### 💡 실습에서 활용

**API 요청 에러 처리**:
```python
# 03일차 - 날씨 앱
try:
    response = requests.get(url, params=params)

    if response.status_code == 200:
        data = response.json()
        temperature = data['main']['temp']
        st.write(f"온도: {temperature}°C")
    else:
        st.error(f"에러: {response.status_code}")

except requests.exceptions.Timeout:
    st.error("타임아웃! 네트워크를 확인하세요.")
except requests.exceptions.ConnectionError:
    st.error("연결 실패! 인터넷을 확인하세요.")
except Exception as e:
    st.error(f"예상치 못한 오류: {e}")
```

---

## 📱 7. Streamlit 필수

### 입력 위젯

**텍스트 입력**:
```python
name = st.text_input("이름을 입력하세요")
name = st.text_input("이름", value="기본값")
name = st.text_input("이름", placeholder="예: 홍길동")
```

**텍스트 영역 (여러 줄)**:
```python
message = st.text_area("메시지 입력", height=200)
```

**숫자 입력**:
```python
age = st.number_input("나이", min_value=0, max_value=120, value=25)
price = st.number_input("가격", value=1000, step=100)
```

**슬라이더**:
```python
age = st.slider("나이", 0, 100, 25)  # (라벨, 최소, 최대, 기본값)
range_values = st.slider("범위", 0, 100, (20, 80))  # 범위 선택
```

**선택 위젯**:
```python
# 드롭다운
category = st.selectbox("카테고리", ["정치", "경제", "사회"])

# 다중 선택
options = st.multiselect("선택", ["A", "B", "C"], default=["A"])

# 라디오 버튼
choice = st.radio("선택", ["옵션1", "옵션2", "옵션3"])

# 체크박스
agree = st.checkbox("동의합니다")
if agree:
    st.write("동의했습니다!")
```

**버튼**:
```python
# 일반 버튼
if st.button("클릭"):
    st.write("버튼이 클릭되었습니다!")

# 다운로드 버튼
st.download_button(
    label="파일 다운로드",
    data="내용",
    file_name="file.txt",
    mime="text/plain"
)
```

**파일 업로드**:
```python
uploaded_file = st.file_uploader("파일 선택", type=["txt", "csv"])

if uploaded_file:
    content = uploaded_file.read()
    st.write(content)
```

**색상 선택**:
```python
color = st.color_picker("색상 선택", "")
```

**날짜/시간 입력**:
```python
date = st.date_input("날짜 선택")
time = st.time_input("시간 선택")
```

---

### 출력

**텍스트 출력**:
```python
# 기본 출력
st.write("안녕하세요")
st.write("값:", 123)

# 제목
st.title("🎯 제목")
st.header("헤더")
st.subheader("서브헤더")

# 마크다운
st.markdown("**굵게** *기울임*")
st.markdown("# 제목1\n## 제목2")

# 코드
st.code("print('Hello')", language="python")

# 캡션 (작은 글씨)
st.caption("부연 설명")
```

**구분선과 여백**:
```python
st.divider()  # 구분선
st.write("")  # 빈 줄
```

**상태 메시지**:
```python
st.success("✅ 성공!")
st.info("ℹ️ 정보")
st.warning("⚠️ 경고")
st.error("❌ 에러")
```

**이미지**:
```python
st.image("image.png")
st.image("image.png", caption="설명", width=300)
st.image(img_array, use_container_width=True)
```

**차트**:
```python
import pandas as pd

# 라인 차트
df = pd.DataFrame({"x": [1, 2, 3], "y": [10, 20, 15]})
st.line_chart(df.set_index("x"))

# 바 차트
st.bar_chart(df.set_index("x"))
```

**JSON 표시**:
```python
data = {"name": "철수", "age": 25}
st.json(data)
```

---

### 레이아웃

**컬럼 (열)**:
```python
col1, col2, col3 = st.columns(3)

with col1:
    st.write("첫 번째 열")

with col2:
    st.write("두 번째 열")

with col3:
    st.write("세 번째 열")
```

**사이드바**:
```python
st.sidebar.title("사이드바")
category = st.sidebar.selectbox("카테고리", ["A", "B", "C"])
```

**탭**:
```python
tab1, tab2, tab3 = st.tabs(["탭1", "탭2", "탭3"])

with tab1:
    st.write("탭1 내용")

with tab2:
    st.write("탭2 내용")
```

**확장 패널**:
```python
with st.expander("자세히 보기"):
    st.write("숨겨진 내용")
```

**컨테이너**:
```python
container = st.container()
container.write("컨테이너 내용")
```

---

### 세션 상태 (st.session_state)

**세션 상태란?**
- 페이지 새로고침되어도 값이 유지됨
- 사용자별로 독립적
- 대화 히스토리, TODO 리스트 등에 활용

**기본 사용**:
```python
# 초기화
if 'count' not in st.session_state:
    st.session_state.count = 0

# 값 읽기
st.write(f"카운트: {st.session_state.count}")

# 값 수정
if st.button("증가"):
    st.session_state.count += 1
```

**리스트 저장**:
```python
# TODO 리스트 초기화
if 'todos' not in st.session_state:
    st.session_state.todos = []

# 항목 추가
new_todo = st.text_input("할 일 입력")
if st.button("추가"):
    st.session_state.todos.append(new_todo)

# 항목 표시
for todo in st.session_state.todos:
    st.write(f"- {todo}")
```

**💡 실습에서 활용**:
```python
# 03일차 - AI 챗봇
if 'messages' not in st.session_state:
    st.session_state.messages = []

# 메시지 추가
st.session_state.messages.append({
    "role": "user",
    "content": user_input
})

# 모든 메시지 표시
for msg in st.session_state.messages:
    with st.chat_message(msg["role"]):
        st.write(msg["content"])
```

---

### 채팅 UI (Chat)

**채팅 메시지 표시**:
```python
# 사용자 메시지
with st.chat_message("user"):
    st.write("안녕하세요!")

# AI 메시지
with st.chat_message("assistant"):
    st.write("반갑습니다!")

# 아이콘 커스텀
with st.chat_message("user", avatar="👤"):
    st.write("메시지")
```

**채팅 입력창**:
```python
user_input = st.chat_input("메시지를 입력하세요...")

if user_input:
    st.write(f"입력: {user_input}")
```

---

### 로딩 표시

**스피너**:
```python
import time

with st.spinner("처리 중..."):
    time.sleep(3)  # 시간이 걸리는 작업
st.success("완료!")
```

**프로그레스 바**:
```python
import time

progress = st.progress(0)

for i in range(100):
    time.sleep(0.01)
    progress.progress(i + 1)
```

---

### Secrets 관리

**secrets.toml 파일 생성**:
```toml
# .streamlit/secrets.toml
OPENAI_API_KEY = "sk-..."
DB_PASSWORD = "password123"
```

**코드에서 사용**:
```python
api_key = st.secrets["OPENAI_API_KEY"]
password = st.secrets["DB_PASSWORD"]

# 딕셔너리 형태로도 가능
st.secrets["database"]["host"]
```

**💡 주의사항**:
- `.streamlit/secrets.toml`은 `.gitignore`에 추가
- 절대 GitHub에 올리지 않기
- API 키는 secrets로만 관리

---

## 🔌 8. 외부 라이브러리

### requests (HTTP 요청)

**기본 GET 요청**:
```python
import requests

response = requests.get("https://api.example.com/data")

# 응답 상태 코드
print(response.status_code)  # 200, 404, 500 등

# JSON 응답
data = response.json()  # 딕셔너리로 변환

# 텍스트 응답
text = response.text
```

**파라미터 전달**:
```python
params = {
    "q": "python",
    "limit": 10
}

response = requests.get("https://api.example.com/search", params=params)
# 실제 URL: https://api.example.com/search?q=python&limit=10
```

**헤더 설정**:
```python
headers = {
    "Authorization": "Bearer TOKEN",
    "Content-Type": "application/json"
}

response = requests.get(url, headers=headers)
```

**타임아웃 설정**:
```python
try:
    response = requests.get(url, timeout=10)  # 10초 제한
except requests.exceptions.Timeout:
    print("타임아웃!")
```

**💡 실습에서 활용**:
```python
# 03일차 - 날씨 앱
url = "http://api.openweathermap.org/data/2.5/weather"
params = {
    "q": "Seoul",
    "appid": api_key,
    "units": "metric",
    "lang": "kr"
}

response = requests.get(url, params=params)

if response.status_code == 200:
    data = response.json()
    temp = data['main']['temp']
    st.write(f"온도: {temp}°C")
```

---

### BeautifulSoup (웹 크롤링)

**HTML 파싱**:
```python
from bs4 import BeautifulSoup
import requests

# 웹 페이지 가져오기
response = requests.get("https://example.com")
soup = BeautifulSoup(response.text, 'html.parser')
```

**CSS 셀렉터로 요소 찾기**:
```python
# 클래스로 찾기
elements = soup.select('.class-name')

# ID로 찾기
element = soup.select('-id')

# 태그로 찾기
divs = soup.select('div')

# 복합 선택
links = soup.select('div.content a')

# 첫 번째 요소만
first = soup.select_one('.class-name')
```

**텍스트와 속성 추출**:
```python
# 텍스트 추출
title = element.text
title_clean = element.text.strip()

# 속성 추출
link = element['href']
link_safe = element.get('href')  # 없으면 None
```

**💡 실습에서 활용**:
```python
# 02일차 - 뉴스 크롤러
response = requests.get(url)
soup = BeautifulSoup(response.text, 'html.parser')

headlines = soup.select('.news-title')

for headline in headlines[:10]:
    title = headline.text.strip()
    link = headline.get('href')
    print(f"{title}: {link}")
```

---

### OpenAI API

**클라이언트 생성**:
```python
from openai import OpenAI

client = OpenAI(api_key=st.secrets["OPENAI_API_KEY"])
```

**채팅 완성 (Chat Completion)**:
```python
response = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[
        {"role": "system", "content": "당신은 친절한 AI입니다."},
        {"role": "user", "content": "안녕하세요!"}
    ],
    max_tokens=500,
    temperature=0.7
)

answer = response.choices[0].message.content
print(answer)
```

**메시지 역할**:
- `system`: AI의 성격/역할 설정
- `user`: 사용자 메시지
- `assistant`: AI 응답

**파라미터**:
- `model`: 사용할 모델 (gpt-4o-mini, gpt-4 등)
- `max_tokens`: 최대 응답 길이
- `temperature`: 창의성 (0~2, 기본 0.7)

**💡 실습에서 활용**:
```python
# 03일차 - AI 챗봇
if 'messages' not in st.session_state:
    st.session_state.messages = [
        {"role": "system", "content": "친절한 AI 비서"}
    ]

user_input = st.chat_input("메시지 입력...")

if user_input:
    # 사용자 메시지 추가
    st.session_state.messages.append({
        "role": "user",
        "content": user_input
    })

    # AI 응답 생성
    response = client.chat.completions.create(
        model="gpt-4o-mini",
        messages=st.session_state.messages
    )

    ai_message = response.choices[0].message.content

    # AI 메시지 추가
    st.session_state.messages.append({
        "role": "assistant",
        "content": ai_message
    })
```

---

### qrcode (QR 코드)

**QR 코드 생성**:
```python
import qrcode

# QR 코드 객체 생성
qr = qrcode.QRCode(
    version=1,        # 크기 (1~40)
    box_size=10,      # 각 박스 픽셀 크기
    border=4          # 테두리 두께
)

# 데이터 추가
qr.add_data("https://example.com")
qr.make(fit=True)

# 이미지로 변환
img = qr.make_image(fill_color="black", back_color="white")

# 저장
img.save("qrcode.png")
```

**💡 실습에서 활용**:
```python
# 02일차 - QR 코드 생성기
from io import BytesIO

qr = qrcode.QRCode(version=1, box_size=10, border=4)
qr.add_data(text)
qr.make(fit=True)

img = qr.make_image(fill_color="black", back_color="white")

# Streamlit에 표시
st.image(img)

# 다운로드 버튼
buffer = BytesIO()
img.save(buffer, format="PNG")
st.download_button(
    label="이미지 다운로드",
    data=buffer.getvalue(),
    file_name="qrcode.png",
    mime="image/png"
)
```

---

### pandas (데이터 처리)

**DataFrame 생성**:
```python
import pandas as pd

# 딕셔너리로 생성
data = {
    "이름": ["철수", "영희", "민수"],
    "나이": [25, 23, 27],
    "도시": ["서울", "부산", "대구"]
}

df = pd.DataFrame(data)
print(df)
```

**CSV 저장/읽기**:
```python
# 저장
df.to_csv("data.csv", index=False, encoding="utf-8-sig")

# 읽기
df = pd.read_csv("data.csv", encoding="utf-8")
```

**💡 실습에서 활용**:
```python
# 02일차 - 뉴스 크롤러
news_list = [
    {"제목": "뉴스1", "링크": "http://..."},
    {"제목": "뉴스2", "링크": "http://..."}
]

df = pd.DataFrame(news_list)
csv = df.to_csv(index=False).encode('utf-8-sig')

st.download_button(
    label="CSV 다운로드",
    data=csv,
    file_name="news.csv",
    mime="text/csv"
)
```

---

### datetime (날짜/시간)

**현재 시간**:
```python
from datetime import datetime

now = datetime.now()
print(now)  # 2025-10-11 14:30:00.123456

# 포맷팅
formatted = now.strftime("%Y-%m-%d %H:%M:%S")
print(formatted)  # 2025-10-11 14:30:00
```

**포맷 코드**:
- `%Y`: 년 (4자리)
- `%m`: 월 (01-12)
- `%d`: 일 (01-31)
- `%H`: 시 (00-23)
- `%M`: 분 (00-59)
- `%S`: 초 (00-59)

**문자열 → datetime**:
```python
date_str = "2025-10-11"
date_obj = datetime.strptime(date_str, "%Y-%m-%d")
```

**💡 실습에서 활용**:
```python
# 파일명에 시간 포함
timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
filename = f"backup_{timestamp}.txt"
# backup_20251011_143000.txt
```

---

## 📚 참고 자료

### 공식 문서
- Python 튜토리얼: https://docs.python.org/ko/3/tutorial/
- Streamlit 문서: https://docs.streamlit.io/
- requests 문서: https://requests.readthedocs.io/
- BeautifulSoup 문서: https://www.crummy.com/software/BeautifulSoup/bs4/doc/

### AI 도구
- ChatGPT: https://chat.openai.com
- OpenAI API: https://platform.openai.com/docs
- Anthropic Claude: https://docs.anthropic.com/

### 추가 학습
- Python 표준 라이브러리: https://docs.python.org/ko/3/library/
- PyPI (패키지 저장소): https://pypi.org/

---

**🎉 이 치트 시트와 함께 파이썬 학습을 즐기세요!**

**마지막 업데이트**: 2025-10-11
**작성**: 유클리드소프트 ABC 부트캠프