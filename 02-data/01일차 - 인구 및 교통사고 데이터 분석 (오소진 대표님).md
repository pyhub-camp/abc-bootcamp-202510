# 01일차 - 인구 및 교통사고 데이터 분석

> **🎯 오늘의 목표**: 공공데이터를 활용하여 인구 현황과 교통사고 데이터를 분석하고, 지도로 시각화합니다!

```table-of-contents
```

---

## 📚 이 날 다루는 핵심 기술

> **📝 참고**: 이 강의는 오소진 대표님께서 진행하시며, 3일차부터는 이 내용을 기반으로 심화 학습을 진행합니다.

### 🐍 Python 라이브러리

**데이터 분석**:
- `pandas`: CSV 읽기, DataFrame 조작, 필터링, 정렬, groupby 집계
- `numpy`: 수치 계산, 유클리드 거리 계산

**데이터 시각화**:
- `matplotlib`: 막대그래프, 파이차트, 선그래프
- `seaborn`: 통계 시각화 (언급)

**지리 데이터**:
- `folium`: 인터랙티브 지도 생성, 마커, CircleMarker
- `geopy`: 좌표 간 거리 계산 (geodesic)

### 💡 핵심 개념

**pandas 기초**:
```python
pd.read_csv()           # CSV 파일 읽기
df.head(), df.info()    # 데이터 탐색
df['열명']              # 열 선택
df[조건]                # 필터링
df.sort_values()        # 정렬
df.groupby()            # 그룹별 집계
```

**matplotlib 기초**:
```python
plt.bar()               # 막대그래프
plt.pie()               # 파이차트
plt.plot()              # 선그래프
plt.rcParams            # 한글 폰트 설정
```

**지도 시각화**:
```python
folium.Map()            # 지도 생성
folium.CircleMarker()   # 원형 마커
m.save()                # HTML 저장
```

**거리 계산**:
```python
geodesic(point1, point2).km    # 두 좌표 간 거리
numpy.linalg.norm()            # 유클리드 거리
```

### 🎯 학습 목표

1. ✅ pandas로 CSV 데이터를 읽고 기본 통계 확인
2. ✅ 조건 필터링과 groupby 집계 활용
3. ✅ matplotlib으로 막대/파이/선 그래프 그리기
4. ✅ folium으로 지도에 데이터 시각화
5. ✅ geopy로 최단 거리 계산
6. ✅ 실전 프로젝트: 교통사고 데이터 종합 분석

---

## 📋 Overview

**오늘 배울 내용**:
1. 인구 데이터 분석 및 시각화
   - 대한민국, 대전광역시 인구 현황 분석
   - 본인이 사는 동네와 가장 비슷한 인구구조 지역 찾기
2. 교통사고 데이터 분석 및 시각화
   - 교통사고 현황 데이터 분석
   - 지도 시각화로 공간 데이터 표현
   - 나와 가장 가까운 WIFI, 의료 기관 찾기
3. 팀 프로젝트
   - 교통사고 연도별, 지역별 분석

---

## 📦 필요한 라이브러리 설치

+ `pandas` :  데이터 분석
+ `matplotlib` 및 `seaborn` :  데이터 시각화
+ `folium` : 지도 시각화
+ `geopy` : 거리 계산

---

## 🌍 Section 1. 인구 데이터 분석 및 시각화

### 📂 데이터 출처

**인구 데이터 다운로드**:
1. **행정안전부 주민등록 인구통계** (회원가입 없이 다운로드 가능)
   - 🔗 https://jumin.mois.go.kr/
   - 메뉴: 인구통계 → 행정동별 연령별 인구현황
   - 파일형식: Excel (.xlsx)

2. **공공데이터포털** (로그인 없이 파일 다운로드 가능)
   - 🔗 https://www.data.go.kr/data/3033304/fileData.do
   - 검색어: "지역별 연령별 주민등록 인구현황"
   - 파일형식: CSV

3. **KOSIS 국가통계포털** (통계청)
   - 🔗 https://kosis.kr/
   - 메뉴: 국내통계 → 주제별통계 → 인구·가구 → 주민등록인구현황

**💡 팁**: 실습에서는 샘플 데이터를 생성하지만, 실제 프로젝트에서는 위 사이트에서 최신 데이터를 다운로드하세요!

---

### 1-1. 대한민국 인구 현황 분석

**데이터 준비**:
- 위 출처에서 다운로드한 실제 데이터 또는 샘플 데이터 활용
- CSV 형식으로 지역별, 연령대별 인구 데이터

**필요한 문법**:
```python
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# 한글 폰트 설정
plt.rcParams['font.family'] = 'AppleGothic'  # Mac
# plt.rcParams['font.family'] = 'Malgun Gothic'  # Windows
plt.rcParams['axes.unicode_minus'] = False

# CSV 파일 읽기
df = pd.read_csv('population_data.csv', encoding='utf-8-sig')

# 데이터 확인
print(df.head())
print(df.info())
print(df.describe())
```

**실습 . 전국 인구 현황 분석**:
```python
import pandas as pd
import matplotlib.pyplot as plt

# 샘플 데이터 생성
data = {
    '지역': ['서울', '경기', '인천', '대전', '대구', '부산', '광주', '울산'],
    '인구': [9668000, 13427000, 2957000, 1475000, 2410000, 3393000, 1456000, 1135000],
    '면적_km2': [605, 10171, 1063, 540, 884, 770, 501, 1060]
}

df = pd.DataFrame(data)

# 인구 밀도 계산
df['인구밀도'] = df['인구'] / df['면적_km2']

# 인구 내림차순 정렬
df_sorted = df.sort_values('인구', ascending=False)

print("=== 전국 인구 현황 ===")
print(df_sorted)

# 막대그래프로 시각화
plt.figure(figsize=(10, 6))
plt.bar(df_sorted['지역'], df_sorted['인구'])
plt.title('전국 시도별 인구 현황')
plt.xlabel('지역')
plt.ylabel('인구 (명)')
plt.xticks(rotation=45)
plt.tight_layout()
plt.show()
```

**실습 . 대전광역시 인구 현황 분석**:
```python
import pandas as pd
import matplotlib.pyplot as plt

# 대전광역시 구별 인구 데이터
data = {
    '구': ['동구', '중구', '서구', '유성구', '대덕구'],
    '인구': [230000, 245000, 490000, 370000, 210000],
    '면적_km2': [136, 62, 95, 177, 68]
}

df_daejeon = pd.DataFrame(data)

# 인구 비중 계산
df_daejeon['인구비중'] = df_daejeon['인구'] / df_daejeon['인구'].sum() * 100

print("=== 대전광역시 구별 인구 현황 ===")
print(df_daejeon)

# 파이차트로 시각화
plt.figure(figsize=(8, 8))
plt.pie(df_daejeon['인구'], labels=df_daejeon['구'], autopct='%1.1f%%')
plt.title('대전광역시 구별 인구 비중')
plt.show()
```

### 1-2. 본인이 사는 동네와 가장 비슷한 인구구조 지역 찾기

**개념**:
- 연령대별 인구 분포를 비교
- 유사도 계산 (예: 코사인 유사도, 유클리드 거리)
- 가장 유사한 지역 찾기

**실습 . 인구 구조 유사도 분석**:
```python
import pandas as pd
import numpy as np

# 지역별 연령대 인구 데이터 (샘플)
data = {
    '지역': ['강남구', '강북구', '송파구', '노원구', '중구'],
    '0-9세': [50000, 40000, 55000, 60000, 30000],
    '10-19세': [45000, 38000, 50000, 58000, 28000],
    '20-29세': [80000, 45000, 70000, 55000, 50000],
    '30-39세': [70000, 50000, 65000, 62000, 35000],
    '40-49세': [60000, 55000, 58000, 65000, 40000],
    '50-59세': [50000, 52000, 48000, 58000, 38000],
    '60세이상': [45000, 65000, 50000, 70000, 55000]
}

df = pd.DataFrame(data)

# 내가 사는 동네 (예: 강남구)
my_region = '강남구'

# 비율로 변환 (연령대별 비중)
age_columns = ['0-9세', '10-19세', '20-29세', '30-39세', '40-49세', '50-59세', '60세이상']
for col in age_columns:
    df[f'{col}_비율'] = df[col] / df[age_columns].sum(axis=1)

# 내 지역 인구 구조
my_structure = df[df['지역'] == my_region][f'{col}_비율' for col in age_columns](f%27%7Bcol%7D_%EB%B9%84%EC%9C%A8%27%20for%20col%20in%20age_columns.md).values[0]

# 유클리드 거리로 유사도 계산
def calculate_similarity(row):
    other_structure = row[f'{col}_비율' for col in age_columns](f%27%7Bcol%7D_%EB%B9%84%EC%9C%A8%27%20for%20col%20in%20age_columns.md).values
    return np.linalg.norm(my_structure - other_structure)

df['유사도'] = df.apply(calculate_similarity, axis=1)

# 가장 유사한 지역 찾기 (본인 제외)
similar_regions = df[df['지역'] != my_region].sort_values('유사도')

print(f"=== {my_region}와 가장 비슷한 인구 구조 지역 ===")
print(similar_regions['지역', '유사도'](%27%EC%A7%80%EC%97%AD%27%2C%20%27%EC%9C%A0%EC%82%AC%EB%8F%84%27.md).head())
```

---

## 🚗 Section 2. 교통사고 데이터 분석 및 시각화

### 📂 데이터 출처

**교통사고 데이터 다운로드**:
1. **TAAS 교통사고분석시스템** (한국도로교통공단)
   - 🔗 https://taas.koroad.or.kr/
   - 메뉴: 통계 → 교통사고 통계 → 시도별 교통사고
   - 파일형식: Excel, CSV
   - 제공데이터: 연도별, 지역별, 사고유형별 통계

2. **공공데이터포털** (로그인 없이 파일 다운로드 가능)
   - 🔗 https://www.data.go.kr/data/15070282/fileData.do
   - 데이터명: "한국도로교통공단_사고유형별 교통사고 통계"
   - 파일형식: CSV
   - 업데이트: 매년 갱신

3. **TAAS Open API** (회원가입 필요)
   - 🔗 https://taas.koroad.or.kr/web/shp/adi/initOpenApi.do
   - 실시간 데이터 연동 가능

**💡 팁**: TAAS는 가장 신뢰할 수 있는 교통사고 통계 플랫폼입니다. 실습에서는 샘플 데이터를 사용하지만, 실제 분석 시 TAAS 데이터를 활용하세요!

---

### 2-1. 교통사고 현황 데이터 분석

**실습 . 교통사고 데이터 탐색**:
```python
import pandas as pd
import matplotlib.pyplot as plt

# 교통사고 샘플 데이터 생성
data = {
    '지역': ['서울', '경기', '인천', '대전', '대구', '부산', '광주', '울산'] * 3,
    '연도': [2021] * 8 + [2022] * 8 + [2023] * 8,
    '사고건수': [12000, 15000, 5000, 3000, 4500, 6000, 2500, 2000,
                13000, 16000, 5500, 3200, 4800, 6300, 2700, 2100,
                11000, 14000, 5200, 2900, 4300, 5800, 2400, 1900],
    '사망자수': [200, 250, 80, 50, 70, 100, 40, 35,
                210, 260, 85, 55, 75, 105, 45, 38,
                190, 240, 78, 48, 68, 95, 38, 32]
}

df_accident = pd.DataFrame(data)

# 연도별 사고 현황
print("=== 연도별 교통사고 현황 ===")
yearly_summary = df_accident.groupby('연도')['사고건수', '사망자수'](%27%EC%82%AC%EA%B3%A0%EA%B1%B4%EC%88%98%27%2C%20%27%EC%82%AC%EB%A7%9D%EC%9E%90%EC%88%98%27.md).sum()
print(yearly_summary)

# 지역별 사고 현황 (2023년)
print("\n=== 2023년 지역별 교통사고 현황 ===")
region_2023 = df_accident[df_accident['연도'] == 2023].sort_values('사고건수', ascending=False)
print(region_2023)
```

**실습 . 연도별 추이 시각화**:
```python
import pandas as pd
import matplotlib.pyplot as plt

# 이전 데이터 활용
yearly = df_accident.groupby('연도')['사고건수', '사망자수'](%27%EC%82%AC%EA%B3%A0%EA%B1%B4%EC%88%98%27%2C%20%27%EC%82%AC%EB%A7%9D%EC%9E%90%EC%88%98%27.md).sum()

# 선그래프로 추이 표현
plt.figure(figsize=(10, 6))
plt.plot(yearly.index, yearly['사고건수'], marker='o', label='사고건수')
plt.plot(yearly.index, yearly['사망자수'] * 50, marker='s', label='사망자수 (x50)')
plt.title('연도별 교통사고 추이')
plt.xlabel('연도')
plt.ylabel('건수')
plt.legend()
plt.grid(True, alpha=0.3)
plt.tight_layout()
plt.show()
```

### 2-2. 지도 시각화

**개념**:
- folium 라이브러리를 사용한 인터랙티브 지도
- 마커, 히트맵, 클러스터링 표현

**실습 . 교통사고 지도 시각화**:
```python
import folium

# 지역별 좌표 데이터
locations = {
    '서울': [37.5665, 126.9780],
    '경기': [37.4138, 127.5183],
    '인천': [37.4563, 126.7052],
    '대전': [36.3504, 127.3845],
    '대구': [35.8714, 128.6014],
    '부산': [35.1796, 129.0756],
    '광주': [35.1595, 126.8526],
    '울산': [35.5384, 129.3114]
}

# 2023년 데이터
accident_2023 = df_accident[df_accident['연도'] == 2023]

# 지도 생성 (대한민국 중심)
m = folium.Map(location=[36.5, 127.5], zoom_start=7)

# 지역별 마커 추가
for idx, row in accident_2023.iterrows():
    region = row['지역']
    if region in locations:
        folium.CircleMarker(
            location=locations[region],
            radius=row['사고건수'] / 500,  # 사고건수에 비례
            popup=f"{region}<br>사고: {row['사고건수']}건<br>사망: {row['사망자수']}명",
            color='red',
            fill=True,
            fillColor='red',
            fillOpacity=0.6
        ).add_to(m)

# HTML로 저장
m.save('accident_map.html')
print("지도가 'accident_map.html'로 저장되었습니다!")
```

### 2-3. 나와 가장 가까운 WIFI, 의료 기관 찾기

### 📂 데이터 출처

**공공 WIFI 위치 데이터**:
1. **서울 열린데이터광장** (로그인 없이 다운로드 가능)
   - 🔗 https://data.seoul.go.kr/dataList/OA-20883/S/1/datasetView.do
   - 데이터명: "서울특별시 공공와이파이 위치정보"
   - 파일형식: CSV, JSON, XML
   - 좌표계: WGS84 (위도, 경도)

2. **공공데이터포털**
   - 🔗 https://www.data.go.kr/data/15047424/fileData.do
   - 데이터명: "서울특별시_공공와이파이 서비스 위치 정보"

3. **서울 공공WIFI 지도**
   - 🔗 https://map.seoul.go.kr/smgis2/short/6NXE1
   - 웹 지도에서 위치 확인 가능

**의료기관 위치 데이터**:
1. **건강보험심사평가원 보건의료빅데이터개방시스템** (회원가입 필요)
   - 🔗 https://opendata.hira.or.kr/
   - 메뉴: 데이터 다운로드 → 의료자원 → 의료기관 정보
   - 제공정보: 병원명, 주소, 좌표, 진료과목, 병상수 등

2. **공공데이터포털** (Open API 제공)
   - 🔗 https://www.data.go.kr/
   - 검색어: "의료기관 정보" 또는 "병원 위치"
   - 파일형식: CSV, Open API

3. **국민건강보험공단**
   - 🔗 https://www.nhis.or.kr/
   - 병원/약국 찾기 서비스

**💡 팁**:
- 서울시 외 다른 지역은 해당 지자체 열린데이터광장에서 다운로드 가능
- 실습에서는 샘플 좌표를 사용하지만, 실제 분석 시 위 데이터를 활용하세요!

---

**개념**:
- geopy를 사용한 거리 계산
- 좌표 기반 최단 거리 탐색

**실습 . 가장 가까운 시설 찾기**:
```python
import pandas as pd
from geopy.distance import geodesic

# 내 위치 (예: 서울시청)
my_location = (37.5665, 126.9780)

# 공공 WIFI 위치 데이터 (샘플)
wifi_data = {
    '장소': ['강남역', '홍대입구역', '신촌역', '명동역', '이태원역'],
    '위도': [37.4979, 37.5572, 37.5559, 37.5636, 37.5342],
    '경도': [127.0276, 126.9239, 126.9369, 126.9825, 126.9944]
}

df_wifi = pd.DataFrame(wifi_data)

# 거리 계산
def calculate_distance(row):
    location = (row['위도'], row['경도'])
    return geodesic(my_location, location).km

df_wifi['거리_km'] = df_wifi.apply(calculate_distance, axis=1)

# 가장 가까운 WIFI 찾기
closest = df_wifi.sort_values('거리_km').head()

print("=== 가장 가까운 공공 WIFI ===")
print(closest)
```

**실습 . 의료 기관 찾기 (응용)**:
```python
import pandas as pd
from geopy.distance import geodesic

# 내 위치
my_location = (37.5665, 126.9780)

# 의료 기관 데이터 (샘플)
hospital_data = {
    '병원명': ['서울대병원', '삼성서울병원', '아산병원', '세브란스병원', '서울성모병원'],
    '위도': [37.5800, 37.4885, 37.5265, 37.5626, 37.5018],
    '경도': [127.0011, 127.0857, 127.1087, 126.9408, 127.0044],
    '전문분야': ['종합', '종합', '종합', '종합', '종합']
}

df_hospital = pd.DataFrame(hospital_data)

# 거리 계산
df_hospital['거리_km'] = df_hospital.apply(
    lambda row: geodesic(my_location, (row['위도'], row['경도'])).km,
    axis=1
)

# 가장 가까운 병원
closest_hospital = df_hospital.sort_values('거리_km').head(3)

print("=== 가장 가까운 의료 기관 (Top 3) ===")
print(closest_hospital['병원명', '거리_km', '전문분야'](%27%EB%B3%91%EC%9B%90%EB%AA%85%27%2C%20%27%EA%B1%B0%EB%A6%AC_km%27%2C%20%27%EC%A0%84%EB%AC%B8%EB%B6%84%EC%95%BC%27.md))
```

---

## 👥 팀 프로젝트: 교통사고 연도별, 지역별 분석

**프로젝트 목표**:
- 교통사고 데이터를 활용한 종합 분석
- 연도별 추이, 지역별 비교, 인사이트 도출

**요구사항**:
1. 연도별 교통사고 추이 분석
2. 지역별 사고 다발 지역 파악
3. 사고건수 대비 사망자수 비율 분석
4. 시각화를 통한 결과 발표

**프로젝트 템플릿**:
```python
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# 1. 데이터 로드
df = pd.read_csv('accident_data.csv')

# 2. 연도별 추이 분석
# TODO: 연도별 사고건수, 사망자수 집계

# 3. 지역별 비교
# TODO: 지역별 사고 다발 지역 Top 5

# 4. 사고 대비 사망률 분석
# TODO: 사망률 = 사망자수 / 사고건수 * 100

# 5. 시각화
# TODO: 막대그래프, 선그래프, 히트맵 등 활용

# 6. 인사이트 도출
# TODO: 분석 결과에서 발견한 패턴과 시사점 정리
```

**평가 기준**:
- 데이터 분석의 정확성
- 시각화의 명확성과 가독성
- 인사이트의 창의성과 논리성
- 팀워크 및 발표력

---

## 💡 핵심 정리

### 인구 데이터 분석
```python
# 인구 밀도 계산
df['인구밀도'] = df['인구'] / df['면적']

# 연령대별 비율
age_ratio = df['연령대_인구'] / df['총인구']

# 유사도 계산 (유클리드 거리)
from numpy.linalg import norm
distance = norm(vector1 - vector2)
```

### 교통사고 데이터 분석
```python
# 연도별 집계
yearly = df.groupby('연도')['사고건수'].sum()

# 지역별 집계
regional = df.groupby('지역')['사고건수'].mean()

# 사망률 계산
df['사망률'] = df['사망자수'] / df['사고건수'] * 100
```

### 지도 시각화
```python
import folium

# 지도 생성
m = folium.Map(location=[위도, 경도], zoom_start=레벨)

# 마커 추가
folium.Marker(
    location=[위도, 경도],
    popup='설명'
).add_to(m)

# CircleMarker (크기 조절 가능)
folium.CircleMarker(
    location=[위도, 경도],
    radius=크기,
    color='색상'
).add_to(m)

# 저장
m.save('map.html')
```

### 거리 계산
```python
from geopy.distance import geodesic

# 두 좌표 간 거리
point1 = (위도1, 경도1)
point2 = (위도2, 경도2)
distance_km = geodesic(point1, point2).km
```

---

## AI 활용 프롬프트 모음

**데이터 분석**:
```
"pandas에서 그룹별 집계와 피벗 테이블 차이를 알려줘"
"연령대별 인구 분포를 히스토그램으로 그리는 방법을 알려줘"
"두 지역의 인구 구조 유사도를 계산하는 다양한 방법을 알려줘"
```

**지도 시각화**:
```
"folium으로 히트맵을 그리는 방법을 알려줘"
"지도에 여러 마커를 클러스터링하는 방법을 알려줘"
"좌표 데이터를 지도에 표시하는 다양한 방법을 알려줘"
```

**거리 계산**:
```
"geopy로 여러 지점까지의 거리를 한 번에 계산하는 방법을 알려줘"
"가장 가까운 k개 지점을 찾는 알고리즘을 알려줘"
"경로 거리와 직선 거리의 차이를 알려줘"
```

**시각화 개선**:
```
"matplotlib 그래프에 한글 폰트를 적용하는 방법을 알려줘"
"seaborn으로 전문적인 색상 팔레트를 사용하는 방법을 알려줘"
"여러 그래프를 subplot으로 배치하는 방법을 알려줘"
```

---

## 🎓 1일차 학습 완료!

**오늘 배운 것**:
1. ✅ 인구 데이터 분석 및 시각화
2. ✅ 인구 구조 유사도 분석
3. ✅ 교통사고 데이터 분석
4. ✅ folium을 사용한 지도 시각화
5. ✅ geopy를 사용한 거리 계산
6. ✅ 팀 프로젝트: 교통사고 종합 분석

**다음 학습**:
- 텍스트 데이터 분석 및 시각화
- NETFLIX 영화 데이터 분석
- 대통령 연설문 텍스트 마이닝
- Wordcloud를 사용한 텍스트 시각화
